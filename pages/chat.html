<!DOCTYPE html>
<html>
  <head>
    <title>Chat Example</title>
    <script>
      // Get the form and chat window elements
      const form = document.getElementById('message-form');
      const chatWindow = document.getElementById('chat-window');
      
      // Add a submit event listener to the form
      form.addEventListener('submit', (event) => {
        // Prevent the default form submission behavior
        event.preventDefault();
        
        // Get the message input element and its value
        const messageInput = document.getElementById('message-input');
        const messageText = messageInput.value;
        
        // Create a new message element and add it to the chat window
        const messageElement = document.createElement('div');
        messageElement.classList.add('message');
        messageElement.textContent = messageText;
        chatWindow.appendChild(messageElement);
        
        // Create a new XMLHttpRequest object
        const xhr = new XMLHttpRequest();
        
        // Set up the request
        xhr.open('POST', '/send-message', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        
        // Send the message as JSON in the request body
        xhr.send(JSON.stringify({ message: messageText }));
        
        // Clear the message input field
        messageInput.value = '';
      });
    </script>
    <style>
      /* Chat window styles */
      #chat-window {
        width: 500px;
        height: 300px;
        margin: auto;
        padding: 10px;
        background-color: #eee;
        overflow-y: scroll;
      }
      .message {
        margin-bottom: 10px;
        padding: 5px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      
      /* Form styles */
      #message-form {
        width: 500px;
        margin: auto;
        padding: 10px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      input[type="text"] {
        width: 100%;
        height: 30px;
        font-size: 16px;
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      button[type="submit"] {
        display: block;
        margin-top: 10px;
        padding: 10px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="chat-window"></div>
    <form id="message-form" method="post">
      <input type="text" id="message-input" name="message" required>
      <button type="submit">Send</button>
    </form>
  </body>
</html>
